services:
  app:
    build:
      context: .
      dockerfile: .docker/Dockerfile
    container_name: ${PROJECT_NAME}
    environment:
      APP_ENV: ${APP_ENV}
      APP_DEBUG: ${APP_DEBUG}
      DATABASE_URL: ${DATABASE_URL}
    volumes:
    - ./:/var/www/html${VOLUME_OPTION}
    networks:
      - web
      - mysql_network
    labels:
      - "traefik.enable=true"
      - "traefik.http.routers.${PROJECT_NAME}.rule=Host(`${DOMAIN}`)"
      - "traefik.http.routers.${PROJECT_NAME}.service=api@internal"
networks:
  web:
    external: true
  mysql_network:
    driver: bridge
